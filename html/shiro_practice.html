<!docutype html>
<html lant="ja">
    <body>
        <main>
            
            
<form method="post" action="example.cgi" enctype="multipart/form-data">

<p>デフォルト<br>
<input type="file" name="example1"></p>
<p><input type="submit" value="送信する"></p>

</form>

<script src="https://www.gstatic.com/firebasejs/5.11.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/5.9.1/firebase-auth.js"></script>
  <script src="https://www.gstatic.com/firebasejs/5.9.1/firebase-database.js"></script>
  <script src="https://www.gstatic.com/firebasejs/5.9.1/firebase-firestore.js"></script>

  <script src="../saji-firebase/public/firebase.config.js"></script>
<script type="text/javascript">
　 var userName = file.name;
var storageRef = firebase.storage().ref(userName);
                    storageRef.put(file).then(function(snapshot) {
                      console.log('Uploaded a blob or file!');
                    });
                
                if (this.files.length > 0) {
                // 選択されたファイル情報を取得
                console.log(this.files.length);
                for(var i=0;i<this.files.length;i++){
                  var file = this.files[i];
                  // readerで、データURLとしてエンコード(BLOB)したファイルデータを作成(不要)
                  //var reader = new FileReader();
                  //reader.readAsDataURL(file);
//ここまで不要。まったくHTML5のFileAPI使ってません！
                    var userName = file.name;
                    var storageRef = firebase.storage().ref(userName);
                    storageRef.put(file).then(function(snapshot) {
                      console.log('Uploaded a blob or file!');
                    });
                }}
</script>
        </main>
    </body>